<!DOCTYPE html>
<html lang="en">
<head>
  <title>Make Your Own Burger | Ultimate Burger Guide</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Your site CSS -->
  <link rel="stylesheet" href="Style.css" />

  <!-- Theme preference -->
  <script>
    (function () {
      const theme = localStorage.getItem("theme") || "dark";
      if (theme === "light") document.documentElement.className = "light-mode";
    })();
  </script>

  <style>
    .builder-wrap {
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(0,0,0,0.12);
      background: rgba(255,255,255,0.92);
    }

    .builder-panel {
      padding: 16px;
      height: 100%;
      background: rgba(255,255,255,0.98);
    }

    .builder-panel h4 { margin: 14px 0 8px; font-size: 1.05rem; }
    .builder-panel label { display:block; margin:6px 0; cursor:pointer; user-select:none; }

    /* Stage */
    .stage-wrap {
      position: relative;
      height: 560px;
      min-height: 560px;
      width: 100%;
      overflow: hidden;
      background: radial-gradient(ellipse at top, rgba(255,255,255,0.08), rgba(0,0,0,0.85));
    }

    #threeStage { width: 100%; height: 100%; }
    #threeStage canvas {
      display:block;
      width:100% !important;
      height:100% !important;
    }

    .stage-hint {
      position:absolute;
      left:12px;
      bottom:12px;
      font-size:12px;
      opacity:0.9;
      background: rgba(0,0,0,0.55);
      color:#fff;
      border:1px solid rgba(255,255,255,0.18);
      padding:8px 10px;
      border-radius:10px;
      pointer-events:none;
    }

    .stage-badge {
      position:absolute;
      right:12px;
      top:12px;
      font-size:12px;
      opacity:0.9;
      background: rgba(0,0,0,0.55);
      color:#fff;
      border:1px solid rgba(255,255,255,0.18);
      padding:8px 10px;
      border-radius:10px;
      pointer-events:none;
      max-width:70%;
      text-align:right;
    }

    #burger-recipe-output {
      margin-top: 18px;
      padding: 14px;
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,0.12);
      background: rgba(255,255,255,0.96);
    }

    #build-burger-button { margin-top: 14px; font-weight: 700; }
  </style>
</head>

<body>
  <header id="main-header">
    <h1>Ultimate Burger Guide</h1>
  </header>

  <nav>
    <a href="index.html">Home</a>
    <a href="city_burgers.html">Best Burgers by City</a>
    <a href="recipe_cards.html">Recipe Cards</a>
    <a href="make_your_own.html">Make Your Own</a>
    <a href="burger_battles.html">Burger Battles</a>
    <a href="submit.html">Submit Your Pick</a>
    <a href="about.html">About</a>
  </nav>

  <main class="container my-3">
    <div class="text-center my-4">
      <h2>Interactive Burger Builder (3D)</h2>
      <p class="mb-0">
        Pick ingredients on the left. The burger updates live using simple 3D shapes and auto-rotates.
      </p>
    </div>

    <div class="builder-wrap row g-0">
      <!-- LEFT -->
      <div class="col-lg-5">
        <div id="burger-builder" class="builder-panel">
          <h4>1. Pick a Bun (Required)</h4>
          <label><input type="radio" name="bun" value="brioche" checked> Brioche Bun</label>
          <label><input type="radio" name="bun" value="sesame"> Sesame Seed Bun</label>
          <label><input type="radio" name="bun" value="lettuce-wrap"> Lettuce Wrap</label>

          <h4>2. Pick a Patty (Required)</h4>
          <label><input type="radio" name="patty" value="beef" checked> Beef Patty</label>
          <label><input type="radio" name="patty" value="chicken"> Grilled Chicken</label>
          <label><input type="radio" name="patty" value="veggie"> Veggie Patty</label>

          <h4>3. Add Cheese (Optional)</h4>
          <label><input type="checkbox" name="cheese" value="american"> American Cheese</label>
          <label><input type="checkbox" name="cheese" value="cheddar"> Sharp Cheddar</label>
          <label><input type="checkbox" name="cheese" value="swiss"> Swiss Cheese</label>

          <h4>4. Add Toppings (Optional)</h4>
          <label><input type="checkbox" name="topping" value="lettuce"> Crisp Lettuce</label>
          <label><input type="checkbox" name="topping" value="tomato"> Fresh Tomato</label>
          <label><input type="checkbox" name="topping" value="onions"> Raw Onions</label>

          <button id="build-burger-button" type="button" class="btn btn-primary w-100">
            Build My Burger!
          </button>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="col-lg-7">
        <div class="stage-wrap">
          <div id="threeStage"></div>
          <div class="stage-hint">Auto-rotate • Drag (optional)</div>
          <div class="stage-badge" id="stageStatus">Status: Initializing…</div>
        </div>
      </div>
    </div>

    <div id="burger-recipe-output" aria-live="polite">
      <b>Your build summary will appear here.</b><br />
      Choose ingredients, then click “Build My Burger!”.
    </div>

    <hr />

    <h2 class="text-center">Our Favorite Recipe Video</h2>
    <div class="video-container">
      <iframe width="560" height="315"
        src="https://www.youtube.com/embed/mwExFzKorws?si=Hy-q9s671xEPOBfs"
        title="YouTube video player" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
      </iframe>
    </div>
  </main>

  <footer>
    <p>© 2025 Ultimate Burger Guide</p>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Google Translate (safe init) -->
  <div id="google_translate_element" style="display:none;"></div>
  <script>
    function googleTranslateElementInit() {
      try {
        new google.translate.TranslateElement({ pageLanguage: "en" }, "google_translate_element");
      } catch (e) {}
    }
  </script>
  <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

  <!-- Three.js (non-module = most compatible) -->
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.160.0/examples/js/controls/OrbitControls.js"></script>

  <script>
    // ----------------------------
    // Helpers: read form selections
    // ----------------------------
    const stageEl = document.getElementById("threeStage");
    const builderEl = document.getElementById("burger-builder");
    const buildBtn = document.getElementById("build-burger-button");
    const outputEl = document.getElementById("burger-recipe-output");
    const stageStatus = document.getElementById("stageStatus");

    function setStatus(t) { stageStatus.textContent = "Status: " + t; }

    function getRadioValue(name) {
      const checked = document.querySelector(`input[name="${name}"]:checked`);
      return checked ? checked.value : null;
    }
    function getCheckedValues(name) {
      return [...document.querySelectorAll(`input[name="${name}"]:checked`)].map(x => x.value);
    }
    function getConfig() {
      return {
        bun: getRadioValue("bun"),
        patty: getRadioValue("patty"),
        cheese: getCheckedValues("cheese"),
        topping: getCheckedValues("topping")
      };
    }

    // Friendly labels for the summary
    const LABEL = {
      bun: { brioche: "Brioche Bun", sesame: "Sesame Seed Bun", "lettuce-wrap": "Lettuce Wrap" },
      patty: { beef: "Beef Patty", chicken: "Grilled Chicken", veggie: "Veggie Patty" },
      cheese: { american: "American Cheese", cheddar: "Sharp Cheddar", swiss: "Swiss Cheese" },
      topping: { lettuce: "Crisp Lettuce", tomato: "Fresh Tomato", onions: "Raw Onions" }
    };

    // ----------------------------
    // Three.js: simple shape burger
    // ----------------------------
    if (!window.THREE) {
      setStatus("Three.js failed");
      stageEl.innerHTML = "<div style='padding:16px;color:#fff'>Three.js failed to load.</div>";
      throw new Error("THREE missing");
    }

    setStatus("Creating scene…");

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x05070b);

    const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 100);
    camera.position.set(0, 3.2, 7.5);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));
    stageEl.appendChild(renderer.domElement);

    // Controls are optional; if they fail, the burger still works.
    let controls = null;
    if (THREE.OrbitControls) {
      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.enablePan = false;
      controls.target.set(0, 1.6, 0);
    }

    // Lighting (makes it look more 3D than PNG planes)
    scene.add(new THREE.AmbientLight(0xffffff, 0.6));
    const key = new THREE.DirectionalLight(0xffffff, 0.9);
    key.position.set(6, 10, 6);
    scene.add(key);
    const fill = new THREE.DirectionalLight(0xffffff, 0.35);
    fill.position.set(-6, 4, -6);
    scene.add(fill);

    // Ground
    const ground = new THREE.Mesh(
      new THREE.PlaneGeometry(30, 30),
      new THREE.MeshStandardMaterial({ color: 0x070a10, roughness: 1 })
    );
    ground.rotation.x = -Math.PI / 2;
    ground.position.y = 0;
    scene.add(ground);

    // Burger container
    const burgerGroup = new THREE.Group();
    burgerGroup.position.set(0, 0.25, 0);
    burgerGroup.rotation.x = -0.10;
    scene.add(burgerGroup);

    // Materials (simple but nice)
    const MAT = {
      bun: new THREE.MeshStandardMaterial({ color: 0xd3a25f, roughness: 0.85 }),
      bunSesame: new THREE.MeshStandardMaterial({ color: 0xc9934f, roughness: 0.85 }),
      wrap: new THREE.MeshStandardMaterial({ color: 0x34c26a, roughness: 0.9 }),
      beef: new THREE.MeshStandardMaterial({ color: 0x3b2418, roughness: 0.95 }),
      chicken: new THREE.MeshStandardMaterial({ color: 0xd7a070, roughness: 0.85 }),
      veggie: new THREE.MeshStandardMaterial({ color: 0x4a352c, roughness: 0.95 }),
      cheeseAmerican: new THREE.MeshStandardMaterial({ color: 0xffd24d, roughness: 0.55 }),
      cheeseCheddar: new THREE.MeshStandardMaterial({ color: 0xff9a2e, roughness: 0.55 }),
      cheeseSwiss: new THREE.MeshStandardMaterial({ color: 0xffedc7, roughness: 0.6 }),
      lettuce: new THREE.MeshStandardMaterial({ color: 0x39d66f, roughness: 0.9 }),
      tomato: new THREE.MeshStandardMaterial({ color: 0xe04747, roughness: 0.7 }),
      onion: new THREE.MeshStandardMaterial({ color: 0xdcc7f2, roughness: 0.8 })
    };

    // Create a "layer mesh" for each ingredient
    function makeBunBottom(material) {
      const geo = new THREE.CylinderGeometry(1.55, 1.65, 0.45, 48);
      const mesh = new THREE.Mesh(geo, material);
      mesh.userData.h = 0.45;
      return mesh;
    }
    function makeBunTop(material) {
      const geo = new THREE.CylinderGeometry(1.62, 1.52, 0.55, 48);
      const mesh = new THREE.Mesh(geo, material);
      mesh.userData.h = 0.55;
      return mesh;
    }
    function makePatty(material) {
      const geo = new THREE.CylinderGeometry(1.45, 1.45, 0.28, 48);
      const mesh = new THREE.Mesh(geo, material);
      mesh.userData.h = 0.28;
      return mesh;
    }
    function makeCheese(material) {
      const geo = new THREE.BoxGeometry(2.7, 0.06, 2.7);
      const mesh = new THREE.Mesh(geo, material);
      mesh.rotation.y = Math.PI / 4;
      mesh.userData.h = 0.06;
      return mesh;
    }
    function makeLettuce() {
      const geo = new THREE.CylinderGeometry(1.55, 1.55, 0.14, 48);
      const mesh = new THREE.Mesh(geo, MAT.lettuce);
      mesh.userData.h = 0.14;
      return mesh;
    }
    function makeTomato() {
      const geo = new THREE.CylinderGeometry(1.35, 1.35, 0.10, 48);
      const mesh = new THREE.Mesh(geo, MAT.tomato);
      mesh.userData.h = 0.10;
      return mesh;
    }
    function makeOnion() {
      const geo = new THREE.TorusGeometry(1.05, 0.06, 16, 64);
      const mesh = new THREE.Mesh(geo, MAT.onion);
      mesh.rotation.x = Math.PI / 2;
      mesh.userData.h = 0.10;
      return mesh;
    }

    // Build stack from config
    function configToMeshes(cfg) {
      const stack = [];

      // bun selection affects material + optional wrap
      if (cfg.bun === "lettuce-wrap") {
        stack.push(makeBunBottom(MAT.wrap));
      } else if (cfg.bun === "sesame") {
        stack.push(makeBunBottom(MAT.bunSesame));
      } else {
        stack.push(makeBunBottom(MAT.bun));
      }

      // patty
      if (cfg.patty === "chicken") stack.push(makePatty(MAT.chicken));
      else if (cfg.patty === "veggie") stack.push(makePatty(MAT.veggie));
      else stack.push(makePatty(MAT.beef));

      // cheeses (can stack multiple)
      for (const c of cfg.cheese) {
        if (c === "cheddar") stack.push(makeCheese(MAT.cheeseCheddar));
        else if (c === "swiss") stack.push(makeCheese(MAT.cheeseSwiss));
        else stack.push(makeCheese(MAT.cheeseAmerican));
      }

      // toppings in stable order
      const order = ["lettuce", "tomato", "onions"];
      for (const t of order) {
        if (!cfg.topping.includes(t)) continue;
        if (t === "lettuce") stack.push(makeLettuce());
        if (t === "tomato") stack.push(makeTomato());
        if (t === "onions") stack.push(makeOnion());
      }

      // top bun/wrap
      if (cfg.bun === "lettuce-wrap") {
        stack.push(makeBunTop(MAT.wrap));
      } else if (cfg.bun === "sesame") {
        stack.push(makeBunTop(MAT.bunSesame));
      } else {
        stack.push(makeBunTop(MAT.bun));
      }

      return stack;
    }

    // Rebuild burger
    function rebuildBurger() {
      while (burgerGroup.children.length) burgerGroup.remove(burgerGroup.children[0]);

      const cfg = getConfig();
      const meshes = configToMeshes(cfg);

      let y = 0.55;
      for (const m of meshes) {
        const h = m.userData.h || 0.2;
        y += h / 2;
        m.position.set(0, y, 0);
        y += h / 2;
        burgerGroup.add(m);
      }

      setStatus("Ready");
    }

    // Size
    function onResize() {
      const rect = stageEl.getBoundingClientRect();
      const w = Math.max(1, Math.floor(rect.width));
      const h = Math.max(1, Math.floor(rect.height));
      renderer.setSize(w, h, false);
      camera.aspect = w / h;
      camera.updateProjectionMatrix();
    }
    window.addEventListener("resize", onResize);
    onResize();

    // Live updates
    builderEl.addEventListener("change", rebuildBurger);

    // Summary button
    buildBtn.addEventListener("click", (e) => {
      e.preventDefault();

      const cfg = getConfig();

      const bunText = LABEL.bun[cfg.bun] || cfg.bun || "—";
      const pattyText = LABEL.patty[cfg.patty] || cfg.patty || "—";
      const cheeseText = cfg.cheese.length ? cfg.cheese.map(c => LABEL.cheese[c] || c).join(", ") : "None";
      const toppingText = cfg.topping.length ? cfg.topping.map(t => LABEL.topping[t] || t).join(", ") : "None";

      outputEl.innerHTML =
        `<b>Your Burger Build:</b><br>` +
        `• Bun: ${bunText}<br>` +
        `• Patty: ${pattyText}<br>` +
        `• Cheese: ${cheeseText}<br>` +
        `• Toppings: ${toppingText}`;
    });

    // Animate
    function animate() {
      requestAnimationFrame(animate);

      burgerGroup.rotation.y += 0.01; // auto-rotate speed
      if (controls) controls.update();
      renderer.render(scene, camera);
    }

    // Boot
    rebuildBurger();
    animate();
  </script>
</body>
</html>


